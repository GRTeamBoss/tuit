<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encryption</title>
</head>
<body>
    <select name="alphabet" id="alphabet">
        <option value="alphabetRussian" selected>RU</option>
        <option value="alphabetEnglish">EN</option>
    </select>
    <section id="cesar">
        <h2>Cesar Encryption</h2>
        <label for="cesar-value">Value : </label>
        <input type="text" name="cesar-value" id="cesar-value" onkeyup="cesar(this)">
        <pre id="cesar-result"></pre>
    </section>
    <section id="alphabet-shift">
        <h2>Alphabet Shift</h2>
        <label for="shift-value">Value : </label>
        <input type="text" name="shift-value" id="shift-value">
        <label for="shift-key">Key : </label>
        <input type="text" name="shift-key" id="shift-key" onkeyup="shift(this)">
        <pre id="shift-result"></pre>
    </section>
</body>
<script type="text/javascript">
    function cesar(element) {
        let newResult = "",
            startIndex = undefined,
            endIndex = undefined,
            alphabet = undefined;
        const value = document.getElementById("cesar-value").value.toUpperCase();
        const result = document.getElementById("cesar-result");
        const alphabetElement = document.getElementById("alphabet");
        const alphabetSelectedIndex = alphabetElement.options.selectedIndex;
        const alphabetSelectedValue = alphabetElement.options[alphabetSelectedIndex.toString()].value;
        switch (alphabetSelectedValue) {
            case "alphabetRussian":
                alphabet = "АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ";
                break;
            case "alphabetEnglish":
                alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                break;
            default:
                break;
        }
        result.textContent = "[*] " + value + "\n";
        for (let item of value) {
            startIndex = alphabet.indexOf(item);
            if (startIndex === -1) {
                newResult += item;
            } else {
                endIndex = startIndex + 3 > alphabet.length - 1 ? startIndex + 3 - alphabet.length : startIndex + 3;
                newResult += alphabet[endIndex];
                result.textContent += ">>> " + item + " --> " + alphabet[endIndex] + "\n";
            }
        }
        result.textContent += "[#] " + newResult;
    }

    function shift(element) {
        let newResult = "",
            key = undefined,
            startIndex = undefined,
            endIndex = undefined,
            alphabet = undefined,
            newAlphabet = undefined;
        const value = document.getElementById("shift-value").value.toUpperCase();
        const result = document.getElementById("shift-result");
        const alphabetElement = document.getElementById("alphabet");
        const alphabetSelectedIndex = alphabetElement.options.selectedIndex;
        const alphabetSelectedValue = alphabetElement.options[alphabetSelectedIndex.toString()].value;
        key = document.getElementById("shift-key").value.toUpperCase();
        result.textContent = "[*] Value : " + value + "\n[*] Key : " + key + "\n";
        while (key.length < value.length) {
            for (let item of key) {
                if (key.length === value.length) {
                    break;
                }
                key += item;
            }
        }
        switch (alphabetSelectedValue) {
            case "alphabetRussian":
                alphabet = "АБВГДЕЁЖЗИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯ";
                break;
            case "alphabetEnglish":
                alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
                break;
            default:
                break;
        }
        for (let i = 0; i !== value.length; i++) {
            if (alphabet.indexOf(value[i]) !== -1) {
                startIndex = alphabet.indexOf(key[i]);
                endIndex = alphabet.indexOf(value[i]);
                newAlphabet = alphabet.slice(startIndex) + alphabet.slice(0, startIndex);
                result.textContent += ">>> " + value[i] + "+" + key[i] + " --> " + newAlphabet[endIndex] + "\n"; 
                newResult += newAlphabet[endIndex];
            } else {
                newResult += value[i];
            }
        }
        result.textContent += "[#] " + newResult;
    }
</script>
</html>
